<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Agenda Madrid">
    <meta name="theme-color" content="#9333ea">
    <title>Agenda Cultural Madrid</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-h-screen; padding: 20px; padding-bottom: 60px; }
        .container { max-width: 600px; margin: 0 auto; }
        header { background: white; border-radius: 20px; padding: 20px; margin-bottom: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); }
        h1 { font-size: 24px; color: #333; margin-bottom: 15px; }
        .view-toggle { display: flex; gap: 10px; }
        .view-btn { flex: 1; padding: 12px; border: none; border-radius: 12px; font-size: 16px; font-weight: 600; cursor: pointer; transition: all 0.3s; }
        .view-btn.active { background: #9333ea; color: white; }
        .view-btn:not(.active) { background: #f3f4f6; color: #666; }
        .filters, .categories { display: flex; gap: 10px; margin-bottom: 15px; overflow-x: auto; padding: 5px; -webkit-overflow-scrolling: touch; }
        .filters::-webkit-scrollbar, .categories::-webkit-scrollbar { display: none; }
        .filter-btn, .cat-btn { background: white; border: 2px solid transparent; padding: 10px 20px; border-radius: 20px; font-size: 14px; font-weight: 600; cursor: pointer; white-space: nowrap; color: #666; }
        .filter-btn.active, .cat-btn.active { border-color: #9333ea; color: #9333ea; box-shadow: 0 4px 12px rgba(147, 51, 234, 0.2); }
        .events-list, .exhibitions-list { display: flex; flex-direction: column; gap: 15px; }
        .event-card, .expo-card { background: white; border-radius: 16px; padding: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); position: relative; }
        .event-card { border-left: 5px solid #9333ea; }
        .expo-card { border-left: 5px solid #ec4899; }
        .event-title, .expo-title { font-size: 18px; font-weight: 700; color: #333; margin-bottom: 10px; padding-right: 100px; }
        .expo-title { font-size: 20px; }
        .event-date { font-size: 14px; color: #9333ea; font-weight: 600; margin-bottom: 10px; }
        .event-location { font-size: 14px; color: #666; margin-bottom: 5px; }
        .event-description { font-size: 14px; color: #666; margin-bottom: 15px; }
        .event-category { background: #f3e8ff; color: #9333ea; padding: 6px 12px; border-radius: 12px; font-size: 12px; font-weight: 600; display: inline-block; }
        .days-until { position: absolute; top: 15px; right: 15px; background: #9333ea; color: white; padding: 5px 12px; border-radius: 20px; font-size: 12px; font-weight: 700; }
        .days-until.today { background: #dc2626; animation: pulse 2s infinite; }
        .days-until.soon { background: #f59e0b; }
        .days-until.last-days { background: #dc2626; }
        @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }
        .event-link { color: #9333ea; text-decoration: none; font-size: 13px; font-weight: 600; display: inline-block; margin-top: 8px; margin-left: 10px; }
        .hidden { display: none; }
        .expo-info { background: white; border-radius: 16px; padding: 15px; margin-bottom: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        .expo-info p { font-size: 14px; color: #666; }
        .cta-btn { display: inline-block; background: #9333ea; color: white; padding: 10px 20px; border-radius: 10px; font-weight: 600; text-decoration: none; margin-top: 10px; }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üé≠ Agenda Madrid</h1>
            <div class="view-toggle">
                <button class="view-btn active" onclick="showView('agenda')">üìÖ Agenda</button>
                <button class="view-btn" onclick="showView('exposiciones')">üé® Exposiciones</button>
            </div>
        </header>

        <div id="agendaView">
            <div class="filters">
                <button class="filter-btn active" onclick="setFilter('all')">Todos</button>
                <button class="filter-btn" onclick="setFilter('week')">Esta semana</button>
                <button class="filter-btn" onclick="setFilter('upcoming')">Pr√≥ximos</button>
            </div>
            <div class="categories">
                <button class="cat-btn active" onclick="setCategory('all')">Todo</button>
                <button class="cat-btn" onclick="setCategory('M√∫sica')">üéµ M√∫sica</button>
                <button class="cat-btn" onclick="setCategory('Teatro')">üé≠ Teatro</button>
                <button class="cat-btn" onclick="setCategory('Cine')">üé¨ Cine</button>
                <button class="cat-btn" onclick="setCategory('Exposici√≥n')">üé® Expo</button>
                <button class="cat-btn" onclick="setCategory('Charla')">üí¨ Charla</button>
            </div>
            <div id="eventsList" class="events-list"></div>
        </div>

        <div id="exposicionesView" class="hidden">
            <div class="expo-info">
                <p>üé® Exposiciones y muestras de larga duraci√≥n en Madrid</p>
            </div>
            <div id="exhibitionsList" class="exhibitions-list"></div>
        </div>
    </div>

    <script>
        const EVENTS = [
            {id:'1',titulo:'Jazz en Caf√© Central',fecha:'2026-02-14',hora:'21:00',lugar:'Caf√© Central - Plaza del √Ångel',descripcion:'Concierto de jazz en vivo',categoria:'M√∫sica',url:''},
            {id:'2',titulo:'Exposici√≥n Thyssen',fecha:'2026-02-10',hora:'10:00',lugar:'Museo Thyssen',descripcion:'Arte contempor√°neo',categoria:'Exposici√≥n',url:'https://museothyssen.org'},
            {id:'3',titulo:'Cine de Terror',fecha:'2026-02-12',hora:'20:30',lugar:'Cineteca Madrid',descripcion:'Ciclo de cine de terror cl√°sico',categoria:'Cine',url:''},
            {id:'4',titulo:'La urgencia de comprender - Sesi√≥n 1',fecha:'2026-02-10',hora:'19:00',lugar:'La Casa Encendida',descripcion:'Narrativas en conflictos contempor√°neos',categoria:'Charla',url:'https://www.lacasaencendida.es'},
            {id:'5',titulo:'La urgencia de comprender - Sesi√≥n 2',fecha:'2026-02-12',hora:'19:00',lugar:'La Casa Encendida',descripcion:'Narrativas en conflictos contempor√°neos',categoria:'Charla',url:'https://www.lacasaencendida.es'},
            {id:'6',titulo:'La urgencia de comprender - Sesi√≥n 3',fecha:'2026-02-17',hora:'19:00',lugar:'La Casa Encendida',descripcion:'Narrativas en conflictos contempor√°neos',categoria:'Charla',url:'https://www.lacasaencendida.es'},
            {id:'7',titulo:'La urgencia de comprender - Sesi√≥n 4',fecha:'2026-02-19',hora:'19:00',lugar:'La Casa Encendida',descripcion:'Narrativas en conflictos contempor√°neos',categoria:'Charla',url:'https://www.lacasaencendida.es'},
            {id:'8',titulo:'La urgencia de comprender - Sesi√≥n 5',fecha:'2026-02-24',hora:'19:00',lugar:'La Casa Encendida',descripcion:'Narrativas en conflictos contempor√°neos',categoria:'Charla',url:'https://www.lacasaencendida.es'},
            {id:'9',titulo:'The Fisher King (Cinemascope 35mm)',fecha:'2026-02-22',hora:'17:30',lugar:'C. de Mira, el R√≠o Baja, 11B',descripcion:'Proyecci√≥n en formato espectacular 35mm',categoria:'Cine',url:''},
            {id:'10',titulo:'Madrid Design Festival 2026',fecha:'2026-02-05',hora:'',lugar:'Varios espacios en Madrid',descripcion:'Festival de dise√±o con 55 exposiciones y 162 actividades',categoria:'Exposici√≥n',url:'https://madriddesignfestival.lafabrica.com'},
            {id:'11',titulo:'FORMA Design Fair',fecha:'2026-03-04',hora:'',lugar:'Matadero Madrid',descripcion:'Primera feria espa√±ola de dise√±o de colecci√≥n',categoria:'Exposici√≥n',url:'https://madriddesignfestival.lafabrica.com'},
            {id:'12',titulo:'Elipa Flamenca - Actuaci√≥n 1',fecha:'2026-02-07',hora:'19:00',lugar:'Centro Cultural Pr√≠ncipe de Asturias',descripcion:'Ciclo de flamenco gratuito. Artistas: David de Arahal & Sandra Carrasco, Ricardo Fern√°ndez del Moral y m√°s. Entrada libre hasta completar aforo',categoria:'M√∫sica',url:'https://zocoflamenco.com/el-zoco/elipa-flamenca-2026-del-5-al-28-de-febrero/'},
            {id:'13',titulo:'Elipa Flamenca - Actuaci√≥n 2',fecha:'2026-02-08',hora:'19:00',lugar:'Centro Cultural Pr√≠ncipe de Asturias',descripcion:'Ciclo de flamenco gratuito. Artistas: Laura Reyes & Javier Pimiento, Mercedes Luj√°n y m√°s. Entrada libre hasta completar aforo',categoria:'M√∫sica',url:'https://zocoflamenco.com/el-zoco/elipa-flamenca-2026-del-5-al-28-de-febrero/'},
            {id:'14',titulo:'Elipa Flamenca - Actuaci√≥n 3',fecha:'2026-02-14',hora:'19:00',lugar:'Centro Cultural Pr√≠ncipe de Asturias',descripcion:'Ciclo de flamenco gratuito. Artistas: Rafael Jim√©nez "El Tato", Rafa del Calli y m√°s. Entrada libre hasta completar aforo',categoria:'M√∫sica',url:'https://zocoflamenco.com/el-zoco/elipa-flamenca-2026-del-5-al-28-de-febrero/'},
            {id:'15',titulo:'Elipa Flamenca - Actuaci√≥n 4',fecha:'2026-02-15',hora:'19:00',lugar:'Centro Cultural Pr√≠ncipe de Asturias',descripcion:'Ciclo de flamenco gratuito. Artistas: Eleazar Cerreduela, Jos√© Luis Mont√≥n y m√°s. Entrada libre hasta completar aforo',categoria:'M√∫sica',url:'https://zocoflamenco.com/el-zoco/elipa-flamenca-2026-del-5-al-28-de-febrero/'},
            {id:'16',titulo:'Elipa Flamenca - Actuaci√≥n 5',fecha:'2026-02-21',hora:'19:00',lugar:'Centro Cultural Pr√≠ncipe de Asturias',descripcion:'Ciclo de flamenco gratuito con grandes figuras del flamenco madrile√±o. Entrada libre hasta completar aforo',categoria:'M√∫sica',url:'https://zocoflamenco.com/el-zoco/elipa-flamenca-2026-del-5-al-28-de-febrero/'},
            {id:'17',titulo:'Elipa Flamenca - Actuaci√≥n 6',fecha:'2026-02-22',hora:'19:00',lugar:'Centro Cultural Pr√≠ncipe de Asturias',descripcion:'Ciclo de flamenco gratuito con grandes figuras del flamenco madrile√±o. Entrada libre hasta completar aforo',categoria:'M√∫sica',url:'https://zocoflamenco.com/el-zoco/elipa-flamenca-2026-del-5-al-28-de-febrero/'},
            {id:'18',titulo:'Elipa Flamenca - Cierre',fecha:'2026-02-28',hora:'19:00',lugar:'Centro Cultural Pr√≠ncipe de Asturias',descripcion:'√öltima actuaci√≥n del ciclo de flamenco gratuito Elipa Flamenca 2026. Entrada libre hasta completar aforo',categoria:'M√∫sica',url:'https://zocoflamenco.com/el-zoco/elipa-flamenca-2026-del-5-al-28-de-febrero/'}
        ];

        const EXHIBITIONS = [
            {id:'e1',titulo:'NIke. Dise√±o en movimiento',fechaFin:'2026-04-05',lugar:'TeamLabs, Plaza San Mart√≠n 1',descripcion:'La mayor exposici√≥n jam√°s creada sobre Nike. Prototipos, objetos m√≠ticos y archivo hist√≥rico',url:'https://www.lafabrica.com'},
            {id:'e2',titulo:'Andr√© Ricard. Dise√±o en uso',fechaFin:'2026-05-03',lugar:'Fern√°n G√≥mez Centro Cultural',descripcion:'Retrospectiva de 60 a√±os del pionero del dise√±o industrial espa√±ol',url:'https://madriddesignfestival.lafabrica.com'},
            {id:'e3',titulo:'Manifiesto Mediterr√°neo',fechaFin:'2026-05-03',lugar:'Fern√°n G√≥mez Centro Cultural',descripcion:'Obras de 30+ artistas: cer√°mica, vidrio, cester√≠a, textiles mediterr√°neos',url:'https://madriddesignfestival.lafabrica.com'},
            {id:'e4',titulo:'Arte textil en Guatemala',fechaFin:'2026-05-03',lugar:'Fern√°n G√≥mez Centro Cultural',descripcion:'Huipiles, tejidos y patrimonio cultural guatemalteco',url:'https://madriddesignfestival.lafabrica.com'}
        ];

        let currentFilter = 'all';
        let currentCategory = 'all';

        function showView(view) {
            document.querySelectorAll('.view-btn').forEach(b => b.classList.remove('active'));
            event.target.classList.add('active');
            if (view === 'agenda') {
                document.getElementById('agendaView').classList.remove('hidden');
                document.getElementById('exposicionesView').classList.add('hidden');
            } else {
                document.getElementById('agendaView').classList.add('hidden');
                document.getElementById('exposicionesView').classList.remove('hidden');
                renderExhibitions();
            }
        }

        function setFilter(filter) {
            currentFilter = filter;
            document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
            event.target.classList.add('active');
            renderEvents();
        }

        function setCategory(cat) {
            currentCategory = cat;
            document.querySelectorAll('.cat-btn').forEach(b => b.classList.remove('active'));
            event.target.classList.add('active');
            renderEvents();
        }

        function getDaysUntil(fecha) {
            const today = new Date(); today.setHours(0,0,0,0);
            const eventDate = new Date(fecha);
            return Math.ceil((eventDate - today) / (1000*60*60*24));
        }

        function formatDate(fecha) {
            const date = new Date(fecha);
            return date.toLocaleDateString('es-ES', {weekday:'short',day:'numeric',month:'short'});
        }

        function filterEvents() {
            let filtered = [...EVENTS];
            const today = new Date(); today.setHours(0,0,0,0);

            if (currentFilter === 'week') {
                const weekFromNow = new Date(today);
                weekFromNow.setDate(weekFromNow.getDate() + 7);
                filtered = filtered.filter(e => {
                    const d = new Date(e.fecha);
                    return d >= today && d < weekFromNow;
                });
            } else if (currentFilter === 'upcoming') {
                filtered = filtered.filter(e => new Date(e.fecha) >= today);
            }

            if (currentCategory !== 'all') {
                filtered = filtered.filter(e => e.categoria === currentCategory);
            }

            return filtered.sort((a,b) => new Date(a.fecha) - new Date(b.fecha));
        }

        function renderEvents() {
            const filtered = filterEvents();
            const container = document.getElementById('eventsList');
            const icons = {'M√∫sica':'üéµ','Teatro':'üé≠','Cine':'üé¨','Exposici√≥n':'üé®','Fiesta':'üéâ','Charla':'üí¨'};
            
            container.innerHTML = filtered.map(e => {
                const days = getDaysUntil(e.fecha);
                let badge = '';
                if (days === 0) badge = '<div class="days-until today">¬°HOY!</div>';
                else if (days === 1) badge = '<div class="days-until today">¬°MA√ëANA!</div>';
                else if (days > 1 && days <= 7) badge = `<div class="days-until soon">En ${days} d√≠as</div>`;
                else if (days > 7) badge = `<div class="days-until">En ${days} d√≠as</div>`;

                return `
                    <div class="event-card">
                        ${badge}
                        <div class="event-title">${e.titulo}</div>
                        <div class="event-date">üìÖ ${formatDate(e.fecha)}${e.hora ? ' ‚Ä¢ '+e.hora : ''}</div>
                        ${e.lugar ? `<div class="event-location">üìç ${e.lugar}</div>` : ''}
                        ${e.descripcion ? `<div class="event-description">${e.descripcion}</div>` : ''}
                        <span class="event-category">${icons[e.categoria]||'üìå'} ${e.categoria}</span>
                        ${e.url ? `<a href="${e.url}" target="_blank" class="event-link">Ver m√°s ‚Üí</a>` : ''}
                    </div>
                `;
            }).join('');
        }

        function renderExhibitions() {
            const container = document.getElementById('exhibitionsList');
            container.innerHTML = EXHIBITIONS.map(ex => {
                const days = getDaysUntil(ex.fechaFin);
                const badge = days <= 30 ? '<span class="days-until last-days">¬°√öltimos d√≠as!</span>' : '';
                
                return `
                    <div class="expo-card">
                        <div style="display:flex;justify-content:space-between;align-items:start;margin-bottom:15px;">
                            <div class="expo-title">${ex.titulo}</div>
                            ${badge}
                        </div>
                        <div class="event-date">üìÖ Hasta ${formatDate(ex.fechaFin)} <span style="color:#666;font-size:12px;">(${days} d√≠as restantes)</span></div>
                        <div class="event-location">üìç ${ex.lugar}</div>
                        <div class="event-description">${ex.descripcion}</div>
                        ${ex.url ? `<a href="${ex.url}" target="_blank" class="cta-btn">M√°s informaci√≥n ‚Üí</a>` : ''}
                    </div>
                `;
            }).join('');
        }

        renderEvents();
    </script>
</body>
</html>
